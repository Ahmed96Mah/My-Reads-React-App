(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{14:function(e,t,n){},20:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(15),s=n.n(o),r=n(4),l=(n(20),n(6)),i=n.n(l),j=n(12),b=n(9),d=n(3),u=(n(14),n(2)),h=n(7),O="https://reactnd-books-api.udacity.com",x=localStorage.token;0===Object.keys(localStorage).filter((function(e){return e.match("user")})).filter((function(e){return localStorage[e].split(",")[3]===localStorage.token})).length?localStorage.loggedIn=!1:localStorage.loggedIn=!0,x||(x=localStorage.token=Math.random().toString(36).substring(-8));var p={Accept:"application/json",Authorization:x},g=function(e,t){return fetch("".concat(O,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)(Object(h.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},m=function(e,t){return fetch("".concat(O,"/search"),{method:"POST",headers:Object(h.a)(Object(h.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},f=n(0),v=function(e){var t=e.book,n=e.onChangeShelf,c=e.existing;return Object(f.jsxs)("select",{defaultValue:"none",onChange:function(e){n(e.target.value,t,c)},children:[Object(f.jsx)("option",{value:"addTo",disabled:!0,children:"Add to..."}),Object(f.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(f.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(f.jsx)("option",{value:"read",children:"Read"}),Object(f.jsx)("option",{value:"none",children:"None"})]})},k=function(e){var t=e.book,n=e.onChangeShelf,c=e.existing;return Object(f.jsxs)("select",{defaultValue:t.shelf,onChange:function(e){n(e.target.value,t,c)},children:[Object(f.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(f.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(f.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(f.jsx)("option",{value:"read",children:"Read"}),Object(f.jsx)("option",{value:"none",children:"None"})]})},S=function(e){var t=e.book,n=e.onChangeShelf,c=e.existing,a=e.onHandleLookup;return void 0!==t.imageLinks&&Object(f.jsxs)("div",{className:"book",children:[Object(f.jsxs)("div",{className:"book-top",children:[Object(f.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(https".concat(t.imageLinks.thumbnail.slice(4),")"),backgroundSize:"cover"}}),Object(f.jsx)("div",{className:"book-shelf-changer",children:c?Object(f.jsx)(k,{book:t,onChangeShelf:n,existing:c}):Object(f.jsx)(v,{book:t,onChangeShelf:n,existing:c})}),Object(f.jsx)("div",{className:"about",onClick:function(){a(t.id)},children:Object(f.jsx)(r.b,{to:"/about",children:"?"})})]}),Object(f.jsx)("div",{className:"book-title",children:t.title}),Object(f.jsx)("div",{className:"book-authors",children:void 0!==t.authors?t.authors.map((function(e,n){return Object(f.jsx)("span",{children:n<t.authors.length-1?"".concat(e,", "):e},n)})):Object(f.jsx)("span",{})})]})},N=function(e){var t=e.booksSearched,n=e.existingBooks,a=e.onHandleSearch,o=e.onChangeShelf,s=e.onHandleLookup,l=e.logged,i=e.onlogout,j=Object(c.useState)(""),b=Object(d.a)(j,2),u=b[0],h=b[1],O=function(e){"false"!==l&&(h(e.target.value),a(e.target.value.trim()))};return"true"===l?Object(f.jsxs)("div",{className:"search-books",children:[Object(f.jsxs)("div",{className:"search-books-bar",children:[Object(f.jsx)(r.b,{className:"close-search",to:"/",reloadDocument:!0,children:"Close"}),Object(f.jsx)("div",{className:"search-books-input-wrapper",children:Object(f.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:u,onChange:O})})]}),Object(f.jsx)("div",{className:"search-books-results",children:Object(f.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(f.jsx)("li",{children:1===n.filter((function(t){return t.id===e.id})).length?Object(f.jsx)(S,{book:n.filter((function(t){return t.id===e.id}))[0],onChangeShelf:o,existing:!0,onHandleLookup:s}):Object(f.jsx)(S,{book:e,onChangeShelf:o,existing:!1,onHandleLookup:s})},e.id)}))})}),Object(f.jsx)("div",{className:"logout",children:Object(f.jsx)(r.b,{to:"/",reloadDocument:!0,onClick:i,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(f.jsx)("path",{d:"M96 480h64C177.7 480 192 465.7 192 448S177.7 416 160 416H96c-17.67 0-32-14.33-32-32V128c0-17.67 14.33-32 32-32h64C177.7 96 192 81.67 192 64S177.7 32 160 32H96C42.98 32 0 74.98 0 128v256C0 437 42.98 480 96 480zM504.8 238.5l-144.1-136c-6.975-6.578-17.2-8.375-26-4.594c-8.803 3.797-14.51 12.47-14.51 22.05l-.0918 72l-128-.001c-17.69 0-32.02 14.33-32.02 32v64c0 17.67 14.34 32 32.02 32l128 .001l.0918 71.1c0 9.578 5.707 18.25 14.51 22.05c8.803 3.781 19.03 1.984 26-4.594l144.1-136C514.4 264.4 514.4 247.6 504.8 238.5z"})})})})]}):Object(f.jsxs)("div",{className:"search-books",children:[Object(f.jsxs)("div",{className:"search-books-bar",children:[Object(f.jsx)(r.b,{className:"close-search",to:"/",reloadDocument:!0,children:"Close"}),Object(f.jsx)("div",{className:"search-books-input-wrapper",children:Object(f.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:u,onChange:O})})]}),Object(f.jsx)("div",{className:"login-div",children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["You have to ",Object(f.jsx)("span",{children:"login"})," or ",Object(f.jsx)("span",{children:"Signup"})," First"]}),Object(f.jsx)(r.b,{to:"/signup",children:Object(f.jsx)("button",{children:"Login or Signup Here"})})]})})]})},C=function(e){var t=e.title,n=e.books,c=e.shelfName,a=e.onChangeShelf,o=e.onHandleLookup;return Object(f.jsxs)("div",{className:"bookshelf",children:[Object(f.jsx)("h2",{className:"bookshelf-title",children:t}),Object(f.jsx)("div",{className:"bookshelf-books",children:Object(f.jsx)("ol",{className:"books-grid",children:n.filter((function(e){return e.shelf===c})).map((function(e){return Object(f.jsx)("li",{children:Object(f.jsx)(S,{book:e,onChangeShelf:a,existing:!0,onHandleLookup:o})},e.id)}))})})]})},w=function(e){var t=e.Books,n=e.onChangeShelf,c=e.onHandleLookup,a=e.logged,o=e.onlogout;return"true"===a?Object(f.jsxs)("div",{className:"list-books",children:[Object(f.jsx)("div",{className:"list-books-title",children:Object(f.jsx)("h1",{children:"MyReads"})}),Object(f.jsxs)("div",{className:"list-books-content",children:[Object(f.jsx)(C,{title:"Currently Reading",books:t,shelfName:"currentlyReading",onChangeShelf:n,onHandleLookup:c}),Object(f.jsx)(C,{title:"Want to Read",books:t,shelfName:"wantToRead",onChangeShelf:n,onHandleLookup:c}),Object(f.jsx)(C,{title:"Read",books:t,shelfName:"read",onChangeShelf:n,onHandleLookup:c})]}),Object(f.jsx)("div",{className:"open-search",children:Object(f.jsx)(r.b,{to:"/search",reloadDocument:!1,children:"Add a book"})}),Object(f.jsx)("div",{className:"logout",children:Object(f.jsx)(r.b,{to:"/",reloadDocument:!0,onClick:o,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(f.jsx)("path",{d:"M96 480h64C177.7 480 192 465.7 192 448S177.7 416 160 416H96c-17.67 0-32-14.33-32-32V128c0-17.67 14.33-32 32-32h64C177.7 96 192 81.67 192 64S177.7 32 160 32H96C42.98 32 0 74.98 0 128v256C0 437 42.98 480 96 480zM504.8 238.5l-144.1-136c-6.975-6.578-17.2-8.375-26-4.594c-8.803 3.797-14.51 12.47-14.51 22.05l-.0918 72l-128-.001c-17.69 0-32.02 14.33-32.02 32v64c0 17.67 14.34 32 32.02 32l128 .001l.0918 71.1c0 9.578 5.707 18.25 14.51 22.05c8.803 3.781 19.03 1.984 26-4.594l144.1-136C514.4 264.4 514.4 247.6 504.8 238.5z"})})})})]}):Object(f.jsxs)("div",{className:"list-books",children:[Object(f.jsx)("div",{className:"list-books-title",children:Object(f.jsx)("h1",{children:"MyReads"})}),Object(f.jsx)("div",{className:"login-div",children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["You have to ",Object(f.jsx)("span",{children:"login"})," or ",Object(f.jsx)("span",{children:"Signup"})," First"]}),Object(f.jsx)(r.b,{to:"/signup",children:Object(f.jsx)("button",{children:"Login or Signup Here"})})]})})]})},y=function(e){var t=e.title,n=e.bookInfo;return e.iterable?Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"title",children:t}),Object(f.jsx)("span",{className:"data",children:void 0!==n?n.map((function(e,t){return Object(f.jsx)("span",{children:t<n.length-1?"".concat(e,", "):e},t)})):Object(f.jsx)("span",{})})]}):Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"title",children:t}),Object(f.jsx)("span",{className:"data",children:n})]})},R=function(e){var t=e.bookID,n=e.onlogout,a=Object(c.useState)([]),o=Object(d.a)(a,2),s=o[0],l=o[1];return Object(c.useEffect)((function(){var e=!0,n=function(){var n=Object(b.a)(i.a.mark((function n(){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a=t,fetch("".concat(O,"/books/").concat(a),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.book}));case 2:c=n.sent,e&&l([c]);case 4:case"end":return n.stop()}var a}),n)})));return function(){return n.apply(this,arguments)}}();return 0===s.length&&n(),function(){e=!1}}),[t,s]),void 0!==s[0]?Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"book-title-div",children:[Object(f.jsx)(r.b,{className:"close-about",to:"/",children:"Close"}),Object(f.jsx)("h1",{children:s[0].title})]}),Object(f.jsxs)("div",{className:"about-div",children:[Object(f.jsx)("div",{className:"about-cover",children:Object(f.jsx)("img",{src:"https".concat(s[0].imageLinks.thumbnail.slice(4)),alt:""})}),Object(f.jsxs)("div",{className:"about-details",children:[Object(f.jsx)(y,{title:"Book ID:",bookInfo:s[0].id,iterable:!1}),Object(f.jsx)(y,{title:"Authors:",bookInfo:s[0].authors,iterable:!0}),Object(f.jsx)(y,{title:"Average Rating:",bookInfo:s[0].averageRating,iterable:!1}),Object(f.jsx)(y,{title:"Categories:",bookInfo:s[0].categories,iterable:!0}),Object(f.jsx)(y,{title:"Page Count:",bookInfo:s[0].pageCount,iterable:!1}),Object(f.jsx)(y,{title:"Publisher:",bookInfo:s[0].publisher,iterable:!1}),Object(f.jsx)(y,{title:"Published Date:",bookInfo:s[0].publishedDate,iterable:!1})]})]}),Object(f.jsx)("div",{className:"logout",children:Object(f.jsx)(r.b,{to:"/",reloadDocument:!0,onClick:n,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(f.jsx)("path",{d:"M96 480h64C177.7 480 192 465.7 192 448S177.7 416 160 416H96c-17.67 0-32-14.33-32-32V128c0-17.67 14.33-32 32-32h64C177.7 96 192 81.67 192 64S177.7 32 160 32H96C42.98 32 0 74.98 0 128v256C0 437 42.98 480 96 480zM504.8 238.5l-144.1-136c-6.975-6.578-17.2-8.375-26-4.594c-8.803 3.797-14.51 12.47-14.51 22.05l-.0918 72l-128-.001c-17.69 0-32.02 14.33-32.02 32v64c0 17.67 14.34 32 32.02 32l128 .001l.0918 71.1c0 9.578 5.707 18.25 14.51 22.05c8.803 3.781 19.03 1.984 26-4.594l144.1-136C514.4 264.4 514.4 247.6 504.8 238.5z"})})})})]}):Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"book-title-div",children:Object(f.jsx)(r.b,{className:"close-about",to:"/",children:"Close"})})})},H=n(11),I=function(){var e=Object(c.useState)("signup"),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),s=Object(d.a)(o,2),r=s[0],l=s[1],i=function(e){a(e.target.name)},j=Object(c.useState)({username:"",email:"",password:""}),b=Object(d.a)(j,2),u=b[0],O=b[1],x=Object(c.useState)({username:"",password:""}),p=Object(d.a)(x,2),g=p[0],m=p[1],v=function(e){var t=e.target,n=t.name,c=t.value;O(Object(h.a)(Object(h.a)({},u),{},Object(H.a)({},n,c)))},k=function(e){var t=e.target,n=t.name,c=t.value;m(Object(h.a)(Object(h.a)({},g),{},Object(H.a)({},n,c)))};return"signup"===n?Object(f.jsxs)("div",{className:"form",children:[Object(f.jsxs)("h1",{children:["Join ",Object(f.jsx)("span",{children:"TODAY"}),", and keep your book activities"," ",Object(f.jsx)("span",{children:"Up-To-Date"})]}),Object(f.jsxs)("form",{action:"/My-Reads-React-App",children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(f.jsx)("input",{type:"text",name:"username",value:u.username,placeholder:"Username",onChange:v,required:!0}),Object(f.jsx)("label",{htmlFor:"email",children:"E-Mail: "}),Object(f.jsx)("input",{type:"text",name:"email",value:u.email,placeholder:"Email",onChange:v,required:!0}),Object(f.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(f.jsx)("input",{type:"text",name:"password",value:u.password,placeholder:"Password",onChange:v,required:!0}),Object(f.jsx)("button",{onClick:function(e){!1===function(e){var t=Math.random().toString(36).substring(-8);if(""!==e.username&&""!==e.email&&""!==e.password)return 0===Object.keys(localStorage).filter((function(e){return e.match("user")})).filter((function(t){return localStorage[t].split(",")[0]===e.username||localStorage[t].split(",")[1]===e.email})).length&&(localStorage["user".concat(localStorage.length)]="".concat(e.username,",").concat(e.email,",").concat(e.password,",").concat(t),localStorage.token=t,!0)}(u)&&(e.preventDefault(),l(!0))},children:"SignUp"}),!0===r&&Object(f.jsx)("p",{children:"Invalid Username or E-Mail!"})]}),Object(f.jsxs)("div",{className:"no",children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("span",{className:"action",children:"Already"})," Have an Account?"]})," ",Object(f.jsx)("button",{name:"login",onClick:i,children:"Login"})]})]}):Object(f.jsxs)("div",{className:"form",children:[Object(f.jsxs)("h1",{children:[Object(f.jsx)("span",{children:"Already"})," Subscribed ?"]}),Object(f.jsxs)("form",{action:"/My-Reads-React-App",children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(f.jsx)("input",{type:"text",name:"username",value:g.username,placeholder:"Username",onChange:k,required:!0}),Object(f.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(f.jsx)("input",{type:"text",name:"password",value:g.password,placeholder:"Password",onChange:k,required:!0}),Object(f.jsx)("button",{onClick:function(){!function(e){var t=Object.keys(localStorage).filter((function(e){return e.match("user")})).filter((function(t){return localStorage[t].split(",")[0]===e.username&&localStorage[t].split(",")[2]===e.password}));1===t.length&&(localStorage.token=localStorage.getItem(t[0]).split(",")[3])}(g)},children:"Login"})]}),Object(f.jsxs)("div",{className:"no",children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("span",{className:"action",children:"Don't"})," Have an account?"]})," ",Object(f.jsx)("button",{name:"signup",onClick:i,children:"SignUp"})]})]})};var L=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)([]),s=Object(d.a)(o,2),r=s[0],l=s[1],h=Object(c.useState)(""),x=Object(d.a)(h,2),v=x[0],k=x[1],S=function(){var e=Object(b.a)(i.a.mark((function e(t,n,c){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(a=r.filter((function(e){return e.id===n.id})),o=r.filter((function(e){return e.id!==n.id})),a[0].shelf=t,l([].concat(Object(j.a)(o),Object(j.a)(a)))):l([].concat(Object(j.a)(r),[n])),g(n,t);case 2:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.trim()){e.next=7;break}return e.next=3,m(t);case 3:void 0!==(n=e.sent).length?a(Object(j.a)(n)):a([]),e.next=8;break;case 7:a([]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){k(e)},H=function(){localStorage.token=Math.random().toString(36).substring(-8)};return Object(c.useEffect)((function(){var e=!0,t=function(){var t=Object(b.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/books"),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:n=t.sent,e&&l(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return"true"===localStorage.loggedIn&&t(),function(){e=!1}}),[]),Object(f.jsxs)(u.c,{children:[Object(f.jsx)(u.a,{path:"/search",element:Object(f.jsx)(N,{booksSearched:n,existingBooks:r,onHandleSearch:C,onChangeShelf:S,onHandleLookup:y,logged:localStorage.loggedIn,onlogout:H})}),Object(f.jsx)(u.a,{exact:!0,path:"/",element:Object(f.jsx)(w,{Books:r,onChangeShelf:S,onHandleLookup:y,logged:localStorage.loggedIn,onlogout:H})}),Object(f.jsx)(u.a,{path:"/about",element:Object(f.jsx)(R,{bookID:v,onlogout:H})}),Object(f.jsx)(u.a,{path:"/signup",element:Object(f.jsx)(I,{})})]})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(r.a,{basename:"/My-Reads-React-App",children:Object(f.jsx)(L,{})})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.4225441e.chunk.js.map